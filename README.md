# 🔧 Kali Linux Custom Image Script – Python Edition

## 🖼️ سكربت مدمج لتخصيص صور الخلفيات والـ GRUB في Kali Linux

---

### 📌 الوصف:
هذا السكربت المدمج والمطور مكتوب بلغة **Python** ويُستخدم لتخصيص صور الخلفيات في نظام **Kali Linux**، بما في ذلك:

- صورة خلفية GRUB بنسبتي 16:9 و 4:3.
- خلفية سطح المكتب (GDM/Background).
- صورة شاشة التمهيد.
- خلفية شاشة تسجيل الدخول.

النسخة الجديدة توفر واجهة تفاعلية سهلة الاستخدام، مع قائمة رئيسية بدلاً من الأوامر المعقدة.

---

### ✅ المميزات المحسنة:
- واجهة تفاعلية - قائمة سهلة الاستخدام لا تحتاج لتذكر الأوامر.
- نسخ احتياطي تلقائي للصور الأصلية قبل الاستبدال.
- معاينة الصور قبل التثبيت (اختياري).
- تغيير فوري لخلفية سطح المكتب.
- تحديث تلقائي لإعدادات النظام (`update-grub` و `dconf update`).
- فحص تلقائي للأدوات والمكتبات المطلوبة.
- واجهة ملونة وجذابة باستخدام مكتبة `colorama`.
- معالجة الأخطاء المحسنة والإرشادات التفاعلية.

---

### 🛠️ المتطلبات:

#### ✅ مكتبة Python:
- `colorama`

#### ✅ أدوات نظام:
- `update-grub`
- `dconf`

#### ✅ أدوات اختيارية (للمعاينة):
- `xdg-open` (لعرض الصور)
- `gsettings` (لتغيير الخلفية فوراً)

---

### 🔄 تثبيت المتطلبات:
```bash
sudo apt update
sudo apt install dconf-cli grub2-common
sudo pip3 install colorama
```

---

## 🚀 طريقة الاستخدام الجديدة

### التشغيل الأساسي:
```bash
# الوضع التفاعلي (مستحسن)
python3 kali.py

# أو مع صلاحيات المدير للتثبيت
sudo python3 kali.py
```

---

### 📋 القائمة التفاعلية:
عند تشغيل السكربت، ستظهر لك القائمة الرئيسية التالية:

```
🏠 القائمة الرئيسية
==================================================
1. إنشاء نسخ الصور
2. تثبيت الصور في النظام  
3. عرض المساعدة
4. الخروج
==================================================
```

---

### 🔄 سير العمل المقترح:

#### الخطوة 1: إنشاء نسخ الصور
- اختر **option 1** من القائمة.
- أدخل اسم الصورة الأصلية (مثال: `my-background.jpg`).
- حدد المسار إذا لزم الأمر.
- السكربت سينشئ تلقائياً **9 نسخ** بأسماء مختلفة مطلوبة لنظام Kali.

#### الخطوة 2: تثبيت الصور في النظام
- أعد تشغيل السكربت بـ:
```bash
sudo python3 kali.py
```
- اختر **option 2** من القائمة.
- تأكد من المعاينة إذا رغبت.
- أكد عملية التثبيت.
- السكربت سيحدث النظام تلقائياً.

#### الخطوة 3: إعادة التشغيل
- أعد تشغيل النظام لرؤية جميع التغييرات.

---

## ⚙️ الميزات التفصيلية

### 1. وظيفة "إنشاء نسخ الصور":
- ينشئ 9 نسخ من صورتك بأسماء محددة.
- يدعم جميع الصيغ الشائعة (JPG, PNG, SVG).
- يسمح بتحديد المسار المخصص.
- تقارير فورية عن نجاح العملية.

### 2. وظيفة "تثبيت الصور في النظام":
- فحص تلقائي للصلاحيات المطلوبة.
- نسخ احتياطي للصور الأصلية (.bak).
- معاينة اختيارية للصور قبل التثبيت.
- تحديث فوري لخلفية سطح المكتب.
- تنفيذ أوامر تحديث النظام تلقائياً.

### 3. وظيفة "عرض المساعدة":
- شرح مفصل للوظائف.
- نصائح عملية للاستخدام.
- إرشادات استكشاف الأخطاء.

---

## 📁 الصور التي يتم التعامل معها

| اسم الصورة              | المسار الهدف                                            | الوصف |
|--------------------------|---------------------------------------------------------|-------|
| grub-16x9.png            | /boot/grub/themes/kali/grub-16x9.png                    | خلفية GRUB بشاشة عريضة |
| grub-4x3.png             | /boot/grub/themes/kali/grub-4x3.png                     | خلفية GRUB بشاشة قياسية |
| desktop-grub.png         | /usr/share/images/desktop-base/desktop-grub.png         | خلفية سطح مكتب GRUB |
| desktop-background.png   | /usr/share/images/desktop-base/desktop-background       | خلفية سطح المكتب الرئيسية |
| default.png              | /usr/share/images/desktop-base/default                  | الخلفية الافتراضية |
| kali-tiles-16x9.jpg      | /usr/share/backgrounds/kali/kali-tiles-16x9.jpg         | خلفية Kali التجسيدية |
| login-blurred            | /usr/share/backgrounds/kali/login-blurred               | خلفية تسجيل الدخول (ضبابية) |
| login-background.svg     | /usr/share/images/desktop-base/login-background.svg     | خلفية تسجيل الدخول (SVG) |
| login.svg                | /usr/share/backgrounds/kali/login.svg                   | شعار تسجيل الدخول |

---

## ⚠️ ملاحظات مهمة

### 🔒 الأمان والصلاحيات:
- وظيفة التثبيت تتطلب صلاحيات `root` (استخدم sudo).
- يتم عمل نسخ احتياطية تلقائية قبل الاستبدال.
- تأكيد مزدوج قبل تنفيذ العمليات الخطيرة.

### 🖼️ نصائح للصور:
- استخدم صوراً بدقة مناسبة لتجنب التشويه.
- الأبعاد الموصى بها: 1920x1080 للشاشات العريضة.
- الصيغ المدعومة: PNG, JPG, SVG.

### 🔄 بعد التنفيذ:
- أعد تشغيل النظام لرؤية جميع التغييرات.
- بعض التغييرات تظهر فوراً، والبعض الآخر يحتاج إعادة تشغيل.

---

## 🐛 استكشاف الأخطاء وإصلاحها

**المشكلة:** مكتبة `colorama` غير مثبتة  
**الحل:**
```bash
sudo pip3 install colorama
```

**المشكلة:** الأدوات المطلوبة غير موجودة  
**الحل:**
```bash
sudo apt update
sudo apt install dconf-cli grub2-common
```

**المشكلة:** لا توجد صلاحيات كافية  
**الحل:**
```bash
sudo python3 kali.py
```

**المشكلة:** الصور غير موجودة  
**الحل:**
- تأكد من وجود الصورة في المجلد الصحيح.
- استخدم الوظيفة 1 أولاً لإنشاء النسخ المطلوبة.

---

## 🔄 السجلات والنسخ الاحتياطية
- يتم إنشاء نسخة احتياطية لكل صورة يتم استبدالها (بامتداد `.bak`).
- يمكن استعادة الإعدادات الأصلية يدوياً من النسخ الاحتياطية.
- السكربت لا يحذف أي ملفات أصلية.

---

## 📌 ماذا يفعل السكربت:
1. التحضير: يتحقق من وجود المكتبات والأدوات اللازمة.
2. التحضير: ينشئ نسخاً من الصورة بأسماء مختلفة مطلوبة للنظام.
3. المعاينة: يسأل المستخدم إذا كان يريد عرض الصور (اختياري).
4. النسخ الاحتياطي: ينشئ نسخاً احتياطية تلقائية للصور الأصلية.
5. التثبيت: ينسخ الصور إلى أماكنها الصحيحة في النظام.
6. التحديث: يغيّر خلفية سطح المكتب فوراً ويحدث إعدادات النظام.
7. الإنهاء: ينبه المستخدم إلى ضرورة إعادة تشغيل النظام.

---

## 👨‍💻 مطور السكربت:
- Drmnef
- 📧 Dr.mnef@Gmail.com
- X&telgram:Mnef7
- 💻 مخصص لمستخدمي ومحبي توزيعة **Kali Linux**

---

## 📞 الدعم:
- للإبلاغ عن مشاكل أو اقتراح تحسينات، يرجى التواصل عبر البريد الإلكتروني.

---

## 💡 نصائح أخيرة:
- احفظ نسخة من صورك الأصلية قبل البدء.
- جرب على نظام تجريبي أولاً إذا أمكن.
- اقرأ الرسائل بعناية أثناء التنفيذ.
- أعد التشغيل لرؤية النتائج النهائية.

تمتع بتجربة تخصيص فريدة لـ Kali Linux! 🎨
